[tox]
envlist = py{27,34,35,36}
skip_missing_interpreters = true
toxworkdir = {toxinidir}/build/test/tox

[testenv]
usedevelop = true
deps = -rrequirements-dev.txt
install_command = pip install --upgrade {opts} {packages}
commands = pytest {posargs}

[testenv:circleci-py27]
passenv = CIRCLE_WORKING_DIRECTORY
basepython = python2.7
commands = pytest \
           --tb=long \
           --junit-xml="{env:CIRCLE_WORKING_DIRECTORY}/girder/build/test/artifacts/pytest-2.7.xml" \
           --drop-db=never

[testenv:circleci-py35]
passenv = CIRCLE_WORKING_DIRECTORY
basepython = python3.5
commands = pytest \
           --tb=long \
           --junit-xml="{env:CIRCLE_WORKING_DIRECTORY}/girder/build/test/artifacts/pytest-3.5.xml" \
           --drop-db=never
